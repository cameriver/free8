# 🃏 Free Eight - Online

オンラインマルチプレイヤーカードゲーム「**Free Eight（フリーエイト）**」

🎮 **デモ**: https://freeeight-online-b6d905954038.herokuapp.com

📖 **詳細ルール**: [GAME_MANUAL.md](./GAME_MANUAL.md)

---

## ゲーム概要

Free Eightは、**トランプ2デック**を使ったオンライン対戦カードゲームです。

「クレイジーエイト」系のカードゲームに、麻雀風の勝利宣言（**ツモ・ロン・ロン返し**）を組み合わせた独自のルールが特徴です。

---

## 基本ルール

### ゲームの流れ

1. **目的**: 手札を全て出し切ることを目指す
2. **カードの出し方**: 場のカードと同じ**マーク**または**数字**のカードを出せる
3. **引く**: 出せるカードがない場合、山札から1枚引く

### 特殊カード

| カード | 効果 |
|--------|------|
| **2** | 次の人に2枚ドロー攻撃（累積可能） |
| **Q♠** | 次の人に5枚ドロー攻撃（累積可能） |
| **5 / 7** | 追加行動が必要 |
| **8** | ワイルドカード（いつでも出せる）＋マーク指定 |

### 勝利条件

| 勝利タイプ | 説明 | 倍率 |
|-----------|------|------|
| **ツモ** | 手札を全て出し切る | ×1 |
| **ロン** | 他プレイヤーの出札と手札合計が一致 | ×2 |
| **ロン返し** | ロン者と放銃者の手札合計が一致 | ×4 |

### 点数表

| カード | 点数 | カード | 点数 |
|--------|------|--------|------|
| A | 0.1 | 8 | **4** |
| 2 | **4** | 9 | 0.9 |
| 3 | 0.3 | 10 | 1 |
| 4 | 0.4 | J | 1 |
| 5 | **2** | Q（♠以外） | 1 |
| 6 | 0.6 | K | 1 |
| 7 | **2** | **Q♠** | **5** |

> ⚠️ 小数点は切り上げ

---

## 遊び方

### 1. ルームに入室

1. **ルームID**: 自動生成されるか、任意のIDを入力
2. **名前**: プレイヤー名を入力
3. **入室ボタン**: クリックしてルームに参加

### 2. ゲーム開始

1. 参加者全員が「開始(投票)」ボタンをクリック
2. 全員の投票が揃うとゲーム開始

### 3. ゲームプレイ

- **自分のターン**: 出せるカードが光ってハイライト表示
- **カードを出す**: ハイライトされたカードをクリック
- **カードを引く**: 「Draw」ボタンをクリック
- **8を出した時**: マーク選択ボタンが表示

### 4. ロン判定

- 他プレイヤーが出したカードで上がれる場合、モーダルが表示
- **5秒以内**に「ロンする」または「続行する」を選択
- タイムアウトで自動的に見逃し

---

## 技術スタック

| カテゴリ | 技術 |
|---------|------|
| Frontend | Vanilla JavaScript (IIFE パターン) |
| Backend | Node.js + Express |
| リアルタイム通信 | Socket.IO (WebSocket) |
| Hosting | Heroku |
| データ永続化 | LocalStorage (クライアントID) |

---

## 主な機能

- ✅ リアルタイムマルチプレイヤー対戦
- ✅ 自動ルームID生成
- ✅ 開始/リスタート投票システム
- ✅ ロン判定モーダル（5秒カウントダウン）
- ✅ 勝利演出（ツモ/ロン/ロン返しアニメーション）
- ✅ セッションスコア管理
- ✅ Freeze機能（不正防止）
- ✅ 自動セッション復帰

---

## ディレクトリ構造

```
Free Eight/
├── package.json           # npm設定・依存関係
├── server.js              # バックエンドサーバー（Express + Socket.IO）
├── README.md              # プロジェクト概要（このファイル）
├── GAME_MANUAL.md         # 詳細ゲームルール
└── public/                # 静的ファイル
    ├── index.html         # メインゲーム画面（オンライン版）
    └── standalone.html    # スタンドアロンデモ版
```

---

## UI構成

```
┌─────────────────────────────────────────┐
│  Free Eight                              │
├─────────────────────────────────────────┤
│  ルーム: [room123456]  名前: [Guest]     │
│  [入室] [開始(投票)] [リスタート]         │
├─────────────────────────────────────────┤
│  山札: 32                                │
├─────────────────────────────────────────┤
│  場: [♠A]  攻撃中 ×2枚！                 │
├─────────────────────────────────────────┤
│  Player1: [?][?][?]                      │
│  Player2 (You): [♠K][♥Q][♦J] [Draw]     │
│  Player3: [?][?]                         │
├─────────────────────────────────────────┤
│  総合スコア                              │
│  1位: Player2  +30  130点               │
│  2位: Player1  -10  100点               │
│  3位: Player3  -20   80点               │
└─────────────────────────────────────────┘
```

---

## ローカル開発

```bash
# 依存関係インストール
npm install

# 開発サーバー起動
npm start

# ブラウザでアクセス
open http://localhost:3000
```

---

## ライセンス

MIT License

---

© 2024 Free Eight Project
